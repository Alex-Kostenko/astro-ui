---
import { ButtonAstro } from "@components/Button";
import { Container } from "@components/Container";
import { SectionTitle, TypographyAstro } from "@components/Typography";
import type { InsightContent } from "@interfaces/insight";

interface Props {
  content: InsightContent[];
}

const { content } = Astro.props;
const path = Astro.originPathname.replace(/\/$/, "");
---

<Container class="grid grid-cols-[280px,_auto] gap-5">
  <aside class="flex flex-col gap-3">
    {
      content.map((c, i) => (
        <a
          href={`${path}#${c.title.replace(" ", "-")}-${i}`}
          class="flex group justify-between rounded p-4 bg-greenLight-200 transition-colors duration-150 hover:bg-greenLight-600"
        >
          <TypographyAstro
            class="!text-brand-black group-hover:!text-brand-white transition-colors duration-150"
            color="white"
            type="subTitle-sm-1"
          >
            {c.title}
          </TypographyAstro>
          <ButtonAstro
            iconOnly
            iconClass="-rotate-45 transition-transform duration-150 group-hover:rotate-45"
          />
        </a>
      ))
    }
  </aside>
  <section>
    {
      content.map((c, i) => {
        return (
          <article
            class="scroll-m-[200px] [&:not(:last-child)]:mb-[120px]"
            id={`${c.title.replace(" ", "-")}-${i}`}
          >
            <SectionTitle
              title={c.title}
              type={String(i + 1).padStart(2, "0")}
              classContainer="mb-10"
            />
            {c.content.map((c) => (
              <div class="flex flex-col gap-[120px] [&:not(:last-child)]:mb-[120px]">
                <>{c.text && <TypographyAstro>{c.text}</TypographyAstro>}</>
                <>
                  {c.image &&
                    c.image.map((img) => <img alt="" src={img.base64} />)}
                </>
              </div>
            ))}
          </article>
        );
      })
    }
  </section>
</Container>
